// Local wrapper to ensure loader picks the bundled UMD copy.
// Minimal loader that ensures a local production UMD is loaded from the same folder.
(function(){
  try{
    if (typeof window === 'undefined') return;
    if (window.reagraph) return; // already present

    // Compute base path from current script (robust across hosting)
    var base = null;
    try { var cur = document.currentScript; if (cur && cur.src) base = cur.src.replace(/\/[^/]*$/, ''); } catch(e) { base = null; }
    if (!base) {
      var scripts = document.getElementsByTagName('script');
      for (var i = scripts.length - 1; i >= 0; i--) {
        var ssrc = scripts[i].src || '';
        if (ssrc.indexOf('/presentation/') !== -1) { base = ssrc.replace(/\/[^/]*$/, ''); break; }
      }
    }
    if (!base) base = '.';

    var umdUrl = base + '/reagraph.umd.js';
    umdUrl = umdUrl.replace(/([^:]\/?)\/+/g, '$1/');

    var s = document.createElement('script');
    s.src = umdUrl;
    s.async = false; // ensure deterministic load order
    s.onload = function(){ if (window.reagraph && console && console.info) console.info('Loaded production reagraph UMD from', umdUrl); };
    s.onerror = function(){ if (console && console.warn) console.warn('Failed to load production reagraph UMD at', umdUrl); };
    document.head.appendChild(s);
  }catch(e){ if (console && console.error) console.error('reagraph local loader error', e); }
})();
